<!DOCTYPE html>
<html>
<head>
  <title>Profile - HIS Academy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <style>
    body{
      margin:0;
      font-family:Poppins, sans-serif;
      background:linear-gradient(135deg,#0f0f1a,#1a1a2e);
      color:white;
      padding-bottom:80px;
    }

    .container{
      padding:20px;
      max-width:1000px;
      margin:auto;
    }

    h2{
      color:#FFD700;
      margin-bottom:20px;
    }

    .card{
      background:#111827;
      padding:20px;
      border-radius:18px;
      margin-bottom:20px;
      box-shadow:0 0 25px rgba(255,215,0,0.15);
    }

    .highlight{
      color:#FFD700;
      font-weight:bold;
    }

    .status-paid{
      color:#00ff88;
      font-weight:bold;
    }

    .status-unpaid{
      color:#ff4d4d;
      font-weight:bold;
    }

    .progress-bar{
      width:100%;
      background:#1f2937;
      border-radius:10px;
      overflow:hidden;
      margin-top:10px;
    }

    .progress-fill{
      height:12px;
      background:#FFD700;
      width:0%;
      transition:width 1s ease;
    }

    .btn{
      width:100%;
      padding:12px;
      border-radius:10px;
      border:none;
      font-weight:bold;
      cursor:pointer;
      margin-top:15px;
    }

    .primary-btn{
      background:#FFD700;
      color:black;
    }

    .secondary-btn{
      background:#1f2937;
      color:white;
      border:1px solid #FFD700;
    }

    /* Bottom Navigation */
    .bottom-nav{
      position:fixed;
      bottom:0;
      left:0;
      width:100%;
      height:65px;
      background:#111827;
      display:flex;
      justify-content:space-around;
      align-items:center;
      box-shadow:0 -5px 20px rgba(255,215,0,0.1);
      z-index:1000;
    }

    .nav-item{
      text-align:center;
      font-size:12px;
      cursor:pointer;
      color:#aaa;
    }

    .nav-item span{
      display:block;
      font-size:20px;
    }

    .nav-item.active{
      color:#FFD700;
    }

  </style>
</head>
<body>

<div class="container">

  <h2>Student Profile</h2>

  <!-- Student Info -->
  <div class="card">
    <p><span class="highlight">Name:</span> <span id="name"></span></p>
    <p><span class="highlight">Email:</span> <span id="email"></span></p>
    <p><span class="highlight">Phone:</span> <span id="phone"></span></p>
    <p><span class="highlight">Medium:</span> <span id="medium"></span></p>
    <p><span class="highlight">Joined On:</span> <span id="joined"></span></p>
  </div>

  <!-- Course Status -->
  <div class="card">
    <p><span class="highlight">Course:</span> SSLC 2026 Crash Course</p>
    <p><span class="highlight">Payment Status:</span> 
      <span id="paymentStatus"></span>
    </p>

    <div id="progressSection" style="display:none;">
      <p><span class="highlight">Course Progress</span></p>
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <p id="progressText"></p>
    </div>
<button class="btn secondary-btn" onclick="logoutUser()">
  Logout
</button>
    function logoutUser(){
  firebase.auth().signOut()
  .then(() => {
    // Clear device session memory (optional but clean)
    // localStorage.removeItem("deviceId");  // DO NOT remove if using device lock

    window.location.replace("index.html");
  })
  .catch((error) => {
    alert("Logout failed. Try again.");
  });
}


    <button id="actionBtn" class="btn primary-btn"></button>
  </div>

  <!-- Performance -->
  <div class="card" id="performanceCard" style="display:none;">
    <p><span class="highlight">Total Study Hours:</span> <span id="studyHours">0</span></p>
    <p><span class="highlight">Live Classes Attended:</span> 0</p>
    <p><span class="highlight">Recorded Classes Watched:</span> 0</p>
    <p><span class="highlight">Badge:</span> <span id="badge"></span></p>
  </div>

</div>

<!-- Bottom Navigation -->
<div class="bottom-nav">

  <div class="nav-item" onclick="goDashboard()">
    <span>üè†</span>
    Dashboard
  </div>

  <div class="nav-item" onclick="goLive()">
    <span>üî¥</span>
    Live
  </div>

  <div class="nav-item" onclick="goNotes()">
    <span>üìÑ</span>
    Notes
  </div>

  <div class="nav-item" onclick="goRecorded()">
    <span>üé•</span>
    Recorded
  </div>

  <div class="nav-item active">
    <span>üë§</span>
    Profile
  </div>

</div>

<script>

  const firebaseConfig = {
    apiKey: "AIzaSyCehyZQukDfslKTY_u9yXcUrzGtMNHvuPA",
    authDomain: "his-academy.firebaseapp.com",
    projectId: "his-academy"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  auth.onAuthStateChanged((user)=>{
    if(user){

      db.collection("students").doc(user.uid).get()
      .then(doc=>{
        if(!doc.exists){
          window.location.href="login.html";
        }

        const data = doc.data();

        document.getElementById("name").innerText = data.name;
        document.getElementById("email").innerText = data.email;
        document.getElementById("phone").innerText = data.phone;
        document.getElementById("medium").innerText = data.medium;

        if(data.joinedOn){
          document.getElementById("joined").innerText =
            new Date(data.joinedOn.seconds * 1000).toLocaleDateString();
        }

        const actionBtn = document.getElementById("actionBtn");

        if(data.paymentStatus === "paid"){

          document.getElementById("paymentStatus").innerHTML =
            "<span class='status-paid'>Active Student ‚úÖ</span>";

          document.getElementById("performanceCard").style.display="block";
          document.getElementById("progressSection").style.display="block";

          const hours = data.totalStudyHours || 0;
          document.getElementById("studyHours").innerText = hours;

          // Simple progress calculation
          let progress = Math.min((hours / 100) * 100, 100);
          document.getElementById("progressFill").style.width = progress + "%";
          document.getElementById("progressText").innerText =
            Math.round(progress) + "% Completed";

          // Badge Logic
          let badge = "Beginner üü¢";
          if(hours > 20) badge = "Top Performer üèÜ";
          else if(hours > 5) badge = "Consistent Learner ü•à";

          document.getElementById("badge").innerText = badge;

          actionBtn.innerText = "Go To Dashboard";
          actionBtn.onclick = () => window.location.href="dashboard.html";

        } else {

          document.getElementById("paymentStatus").innerHTML =
            "<span class='status-unpaid'>Not Enrolled ‚ùå</span>";

          actionBtn.innerText = "View Available Courses";
          actionBtn.onclick = () => window.location.href="courses.html";

        }

      });

    } else {
      window.location.href="login.html";
    }
  });

  function goDashboard(){ window.location.href="dashboard.html"; }
  function goLive(){ window.location.href="live.html"; }
  function goNotes(){ window.location.href="notes.html"; }
  function goRecorded(){ window.location.href="recorded.html"; }
function logoutUser(){
  firebase.auth().signOut()
  .then(() => {
    window.location.href = "index.html";
  })
  .catch((error) => {
    alert("Error logging out. Try again.");
  });
}

</script>

</body>
</html>

