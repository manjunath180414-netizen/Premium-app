<!DOCTYPE html>
<html>
<head>
  <title>Payment Success</title>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body style="background:#0f0f1a;color:white;text-align:center;padding-top:100px;">

<h2>Processing Payment...</h2>

<script>

const firebaseConfig = {
  apiKey: "AIzaSyCehyZQukDfslKTY_u9yXcUrzGtMNHvuPA",
  authDomain: "his-academy.firebaseapp.com",
  projectId: "his-academy",
  storageBucket: "his-academy.firebasestorage.app",
  messagingSenderId: "573278549264",
  appId: "1:573278549264:web:ca2ff160b5a100cc7d2195",
  measurementId: "G-8WPMS7H33F"
};

firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const db = firebase.firestore();

auth.onAuthStateChanged((user) => {

  if(user){

    db.collection("students").doc(user.uid).update({
      paymentStatus: "paid",
      enrolledCourse: "SSLC 2026 Crash Course"
    })
    .then(() => {
      window.location.href = "dashboard.html";
    })
    .catch((error)=>{
      alert(error.message);
    });

  } else {
    window.location.href = "login.html";
  }

});

</script>

</body>
</html>
